[
  {
    "id": "JOB-001",
    "requirement_module": "cli",
    "description": "Create .NET 10.0 solution file and project structure (src/, tests/ directories, Lopen.sln)",
    "status": "complete",
    "priority": 1,
    "notes": "AC: .NET solution builds successfully with dotnet build"
  },
  {
    "id": "JOB-002",
    "requirement_module": "cli",
    "description": "Create CLI host project (Lopen.Cli) with Microsoft.Extensions.Hosting DI and Program.cs entry point",
    "status": "complete",
    "priority": 1,
    "notes": "AC: CLI entry point uses Microsoft.Extensions.Hosting for dependency injection"
  },
  {
    "id": "JOB-003",
    "requirement_module": "cli",
    "description": "Create test projects and verify dotnet test passes; configure editorconfig and dotnet format",
    "status": "complete",
    "priority": 1,
    "notes": "AC: All test projects run with dotnet test; code formatting passes with dotnet format --verify-no-changes"
  },
  {
    "id": "JOB-004",
    "requirement_module": "cli",
    "description": "Set up CI pipeline (GitHub Actions) with dotnet build, dotnet test, dotnet format --verify-no-changes",
    "status": "complete",
    "priority": 1,
    "notes": "Build infrastructure - ensures all AC verification is automated"
  },
  {
    "id": "JOB-005",
    "requirement_module": "auth",
    "description": "Create Auth module project (Lopen.Auth) and test project with IAuthService interface and service registration",
    "status": "complete",
    "priority": 1,
    "notes": "Implemented: IAuthService, ITokenSourceResolver, EnvironmentTokenSourceResolver, AuthStatusResult, AuthState, AuthCredentialSource, AuthenticationException, StubAuthService, ServiceCollectionExtensions. 29 unit tests passing."
  },
  {
    "id": "JOB-006",
    "requirement_module": "configuration",
    "description": "Create Configuration module project (Lopen.Configuration) and test project with ILopenConfiguration interface",
    "status": "complete",
    "priority": 1,
    "notes": "Implemented: LopenOptions POCO, LopenOptionsValidator, LopenConfigurationBuilder (layered resolution), ConfigurationDiagnostics, ServiceCollectionExtensions. 43 unit tests passing."
  },
  {
    "id": "JOB-007",
    "requirement_module": "storage",
    "description": "Create Storage module project (Lopen.Storage) and test project with IStorageService interface",
    "status": "complete",
    "priority": 1,
    "notes": "Foundation module complete \u2014 IFileSystem, PhysicalFileSystem, SessionId, StoragePaths, SessionState, SessionMetrics, StorageException, ISessionManager, SessionManager, ServiceCollectionExtensions, DI wiring. 77 tests passing."
  },
  {
    "id": "JOB-008",
    "requirement_module": "llm",
    "description": "Create LLM module project (Lopen.Llm) and test project with ILlmService interface (depends on Auth)",
    "status": "complete",
    "priority": 1,
    "notes": "AC: LLM module builds, 74 tests pass. Interfaces: ILlmService, IModelSelector, ITokenTracker, IToolRegistry, IPromptBuilder, IOracleVerifier. Value types: WorkflowPhase, VerificationScope, TokenUsage, SessionTokenMetrics, OracleVerdict, ModelFallbackResult, LlmInvocationResult, LopenToolDefinition, LlmException. Implementations: StubLlmService, DefaultModelSelector, InMemoryTokenTracker. Wired into Program.cs."
  },
  {
    "id": "JOB-009",
    "requirement_module": "core",
    "description": "Create Core module project (Lopen.Core) and test project with service interfaces (depends on LLM, Storage, Configuration)",
    "status": "complete",
    "priority": 1,
    "notes": "Central orchestration module"
  },
  {
    "id": "JOB-010",
    "requirement_module": "tui",
    "description": "Create TUI module project (Lopen.Tui) and test project with service registration (depends on CLI, Core)",
    "status": "complete",
    "priority": 1,
    "notes": "TUI module foundation - ITuiApplication, ITuiComponent, IComponentGallery, StubTuiApplication, ComponentGallery, DI registration, 24 tests"
  },
  {
    "id": "JOB-011",
    "requirement_module": "otel",
    "description": "Create OTEL module project (Lopen.Otel) and test project as cross-cutting concern (depends on Core)",
    "status": "complete",
    "priority": 1,
    "notes": "OpenTelemetry observability module - ActivitySources, Meter+instruments, DI registration with toggles, 54 tests"
  },
  {
    "id": "JOB-012",
    "requirement_module": "auth",
    "description": "Implement device flow login via Copilot SDK - lopen auth login initiates device flow and completes authentication",
    "status": "complete",
    "priority": 2,
    "notes": "CopilotAuthService.LoginAsync delegates to gh CLI device flow (gh auth login --web). Tests: interactive login, gh unavailable error, login failure propagation. GhCliAdapter handles process execution."
  },
  {
    "id": "JOB-013",
    "requirement_module": "auth",
    "description": "Implement auth status reporting - lopen auth status reports authenticated/unauthenticated/invalid states",
    "status": "complete",
    "priority": 2,
    "notes": "CopilotAuthService.GetStatusAsync merges env var resolution (GH_TOKEN \u2192 GITHUB_TOKEN) with gh auth status parsing. Tests: all status states, env var precedence, gh CLI fallback, error messages."
  },
  {
    "id": "JOB-014",
    "requirement_module": "auth",
    "description": "Implement logout with SDK credential clearing and env var warning when GH_TOKEN/GITHUB_TOKEN is still set",
    "status": "complete",
    "priority": 2,
    "notes": "CopilotAuthService.LogoutAsync calls gh auth logout and warns when GH_TOKEN/GITHUB_TOKEN env vars are still set. Tests: logout with/without env var warnings."
  },
  {
    "id": "JOB-015",
    "requirement_module": "auth",
    "description": "Implement headless auth login error directing user to set GH_TOKEN",
    "status": "complete",
    "priority": 2,
    "notes": "CopilotAuthService.LoginAsync detects non-interactive environment (no TTY) and throws AuthenticationException with GH_TOKEN guidance. Tests: headless error includes what/why/how-to-fix with Copilot Requests permission info."
  },
  {
    "id": "JOB-016",
    "requirement_module": "auth",
    "description": "Implement GH_TOKEN and GITHUB_TOKEN environment variable authentication with precedence rules",
    "status": "complete",
    "priority": 2,
    "notes": "Full precedence chain: GH_TOKEN \u2192 GITHUB_TOKEN \u2192 gh auth credentials \u2192 not authenticated. EnvironmentTokenSourceResolver handles env vars; CopilotAuthService falls through to IGhCliAdapter for stored credentials. Tests: all precedence combinations."
  },
  {
    "id": "JOB-017",
    "requirement_module": "auth",
    "description": "Implement pre-flight auth check blocking workflow when credentials are missing or invalid",
    "status": "complete",
    "priority": 2,
    "notes": "CopilotAuthService.ValidateAsync performs pre-flight check: resolves credentials (env vars \u2192 gh CLI), validates with gh api call, throws AuthenticationException for NotAuthenticated or InvalidCredentials. Tests: ValidateAsync_Authenticated_DoesNotThrow, ValidateAsync_NotAuthenticated_ThrowsWithGuidance, ValidateAsync_InvalidCredentials_ThrowsWithGuidance, ValidateAsync_GhAuthenticated_DoesNotThrow."
  },
  {
    "id": "JOB-018",
    "requirement_module": "auth",
    "description": "Implement automatic token renewal and failed renewal handling (critical error, save state, inform user)",
    "status": "done",
    "priority": 2,
    "notes": "Depends on LLM module (JOB-046+, P3) for SDK call interception and Core module for critical error/session save. Auth module provides ValidateAsync foundation. gh CLI handles OAuth token refresh internally; PAT tokens cannot be auto-refreshed.",
    "completed_date": "2026-02-16T03:58:24Z"
  },
  {
    "id": "JOB-019",
    "requirement_module": "auth",
    "description": "Implement descriptive auth error messages with what/why/how-to-fix including Copilot Requests permission guidance",
    "status": "complete",
    "priority": 2,
    "notes": "AuthErrorMessages static class provides what/why/how-to-fix error messages for all auth failure modes. Tests verify every error constant contains Why: and Fix: sections. InvalidPat includes Copilot Requests permission guidance."
  },
  {
    "id": "JOB-020",
    "requirement_module": "auth",
    "description": "Verify no credentials stored by Lopen - all credential storage delegated to SDK",
    "status": "complete",
    "priority": 2,
    "notes": "Lopen stores zero credentials. All credential storage delegated to gh CLI (device flow) or env vars. CopilotAuthService has no file I/O. Auth SPECIFICATION.md updated to reflect gh CLI delegation strategy."
  },
  {
    "id": "JOB-021",
    "requirement_module": "auth",
    "description": "Write unit tests for all auth acceptance criteria (device flow, status, logout, env vars, precedence, renewal, errors)",
    "status": "complete",
    "priority": 2,
    "notes": "82 unit tests covering all 13 auth ACs: device flow login (mock gh CLI), auth status (all 3 states), logout with env var warnings, headless error, env var precedence, pre-flight validation, invalid credentials detection, error message quality (what/why/how-to-fix), no credential storage verification."
  },
  {
    "id": "JOB-022",
    "requirement_module": "configuration",
    "description": "Implement configuration hierarchy resolving CLI flags \u2192 project config \u2192 global config \u2192 built-in defaults",
    "status": "complete",
    "priority": 2,
    "notes": "LopenConfigurationBuilder implements 4-layer resolution: defaults \u2192 global JSON \u2192 project JSON \u2192 env vars \u2192 CLI overrides. Tests: Build_LayeredResolution_HighestPriorityWins, Build_GlobalConfig_OverridesDefaults, Build_ProjectConfig_OverridesGlobalConfig, Build_CliOverrides_OverrideProjectConfig."
  },
  {
    "id": "JOB-023",
    "requirement_module": "configuration",
    "description": "Implement project config discovery at .lopen/config.json and global config at ~/.config/lopen/config.json",
    "status": "complete",
    "priority": 2,
    "notes": "DiscoverProjectConfigPath walks directory tree for .lopen/config.json. GetDefaultGlobalConfigPath returns ~/.config/lopen/config.json (XDG-aware). Tests: DiscoverProjectConfigPath_FindsConfigInParent, _ReturnsNull_WhenNoConfigExists, GetDefaultGlobalConfigPath_ReturnsExpectedPath."
  },
  {
    "id": "JOB-024",
    "requirement_module": "configuration",
    "description": "Implement sensible built-in defaults so Lopen works without any configuration files",
    "status": "complete",
    "priority": 2,
    "notes": "All 8 LopenOptions sub-sections have sensible defaults via property initializers. 9 tests verify defaults for Models, Budget, Oracle, Workflow, Session, Git, ToolDiscipline, Display. Build_NoConfigFiles_ReturnsDefaults confirms zero-config works."
  },
  {
    "id": "JOB-025",
    "requirement_module": "configuration",
    "description": "Implement lopen config show displaying resolved configuration with sources and --json output",
    "status": "complete",
    "priority": 2,
    "notes": "ConfigurationDiagnostics.GetEntries resolves key/value/source for all settings. Format produces human-readable table. FormatJson produces machine-readable JSON array. Tests: 11 diagnostics tests including FormatJson_ReturnsValidJsonArray, FormatJson_EmptyEntries, FormatJson_EscapesSpecialCharacters."
  },
  {
    "id": "JOB-026",
    "requirement_module": "configuration",
    "description": "Implement --model CLI flag override for all model phase assignments",
    "status": "complete",
    "priority": 2,
    "notes": "AddModelOverride sets all 4 model phase assignments (RequirementGathering, Planning, Building, Research). Test: Build_ModelOverride_SetsAllPhases."
  },
  {
    "id": "JOB-027",
    "requirement_module": "configuration",
    "description": "Implement --unattended, --resume/--no-resume, --max-iterations CLI flag overrides",
    "status": "complete",
    "priority": 2,
    "notes": "AddUnattendedOverride, AddResumeOverride, AddMaxIterationsOverride convenience methods on LopenConfigurationBuilder. Tests: 6 new tests for unattended true/false, resume true/false, max-iterations set and override of project config."
  },
  {
    "id": "JOB-028",
    "requirement_module": "configuration",
    "description": "Implement budget settings enforcement (token_budget_per_module, premium_request_budget)",
    "status": "complete",
    "priority": 2,
    "notes": "BudgetEnforcer with 4 statuses, DI-registered, 24 tests"
  },
  {
    "id": "JOB-029",
    "requirement_module": "configuration",
    "description": "Implement oracle model and tool discipline configuration passthrough to LLM module",
    "status": "done",
    "priority": 2,
    "notes": "Oracle passthrough already complete via OracleVerifier. Tool discipline passthrough implemented: ToolDisciplineGuardrail accepts ToolDisciplineOptions, GuardrailContext extended with FileReadCounts/CommandRetryCounts, DI registration wired. 12 new tests (21 total). AC verified."
  },
  {
    "id": "JOB-030",
    "requirement_module": "configuration",
    "description": "Implement configuration validation with clear error messages and guidance for invalid values",
    "status": "complete",
    "priority": 2,
    "notes": "LopenOptionsValidator validates all settings with aggregated error messages. 11 validator tests plus Build_InvalidConfig_ThrowsWithAggregatedErrors. Error messages include setting name and guidance."
  },
  {
    "id": "JOB-031",
    "requirement_module": "configuration",
    "description": "Write unit tests for all configuration acceptance criteria (hierarchy, discovery, defaults, overrides, validation)",
    "status": "complete",
    "priority": 2,
    "notes": "52 configuration unit tests covering all configuration ACs: hierarchy (4 layers), discovery, defaults (9 per-section), model override, CLI flag overrides (unattended, resume, max-iterations), JSON diagnostics output, validation with error messages."
  },
  {
    "id": "JOB-032",
    "requirement_module": "storage",
    "description": "Implement .lopen/ directory creation in project root on first workflow run",
    "status": "complete",
    "priority": 2,
    "notes": "StorageInitializer.EnsureDirectoryStructure creates all .lopen/ subdirectories (sessions, modules, cache/sections, cache/assessments, corrupted). Idempotent \u2014 safe to call multiple times. Tests: 6 tests for directory creation, idempotency, constructor validation."
  },
  {
    "id": "JOB-033",
    "requirement_module": "storage",
    "description": "Implement session state persistence (state.json) with phase, step, module, component, task hierarchy",
    "status": "complete",
    "priority": 2,
    "notes": "SessionState record persists phase, step, module, component via state.json. Atomic write (temp+move). Compact snake_case JSON. Tests: SaveSessionStateAsync_And_LoadSessionStateAsync_RoundTrips, LoadSessionStateAsync_ReturnsNull_WhenNoStateFile, SaveSessionStateAsync_UsesAtomicWrite."
  },
  {
    "id": "JOB-034",
    "requirement_module": "storage",
    "description": "Implement session metrics persistence (metrics.json) with per-iteration and cumulative token/premium counts",
    "status": "complete",
    "priority": 2,
    "notes": "SessionMetrics record persists token counts, premium requests, iterations via metrics.json. Atomic write. Tests: SaveSessionMetricsAsync_And_LoadSessionMetricsAsync_RoundTrips, LoadSessionMetricsAsync_ReturnsNull_WhenNoMetricsFile."
  },
  {
    "id": "JOB-035",
    "requirement_module": "storage",
    "description": "Implement session ID generation ({module}-YYYYMMDD-{counter}) and latest symlink management",
    "status": "complete",
    "priority": 2,
    "notes": "SessionId generates {module}-YYYYMMDD-{counter} format with auto-increment. Latest symlink updated on session creation. Tests: 24 SessionId tests + SessionManager create/symlink tests."
  },
  {
    "id": "JOB-036",
    "requirement_module": "storage",
    "description": "Implement auto-save on step/task/phase completion, component completion, and user pause/switch",
    "status": "complete",
    "priority": 2,
    "notes": "AutoSaveService with 6 triggers, DI-registered, 15 tests"
  },
  {
    "id": "JOB-037",
    "requirement_module": "storage",
    "description": "Implement session resume from latest with resume-or-fresh prompt, --resume {id}, and --no-resume",
    "status": "complete",
    "priority": 2,
    "notes": "Implemented --resume {id}, --no-resume global flags and auto-resume from latest active session. ResolveSessionAsync validates format, existence, not-complete. 7 tests covering all scenarios."
  },
  {
    "id": "JOB-038",
    "requirement_module": "storage",
    "description": "Implement plan storage at .lopen/modules/{module}/plan.md with programmatic checkbox updates",
    "status": "complete",
    "priority": 2,
    "notes": "PlanManager with checkbox management, atomic writes, DI, 28 tests"
  },
  {
    "id": "JOB-039",
    "requirement_module": "storage",
    "description": "Implement section cache at .lopen/cache/sections/ with file path + header + timestamp key and invalidation",
    "status": "complete",
    "priority": 2,
    "notes": "SectionCache with dual-layer (memory+disk), file mtime invalidation, 20 tests"
  },
  {
    "id": "JOB-040",
    "requirement_module": "storage",
    "description": "Implement assessment cache with short-lived invalidation on any file change in assessed scope",
    "status": "complete",
    "priority": 2,
    "notes": "AssessmentCache with scope-based invalidation, corrupted entry handling, 18 tests"
  },
  {
    "id": "JOB-041",
    "requirement_module": "storage",
    "description": "Implement corrupted state detection, warning, exclusion from resume, and move to .lopen/corrupted/",
    "status": "complete",
    "priority": 2,
    "notes": "SessionManager.QuarantineCorruptedSessionAsync moves corrupted session files to .lopen/corrupted/{sessionId}/. Corrupted state detection via JsonException in LoadSessionStateAsync throws StorageException. Tests: QuarantineCorruptedSessionAsync_MovesSessionToCorruptedDir, _NonExistentSession_DoesNotThrow, _NullSessionId_Throws."
  },
  {
    "id": "JOB-042",
    "requirement_module": "storage",
    "description": "Implement disk full/write failure as critical system error and corrupted cache silent invalidation",
    "status": "complete",
    "priority": 2,
    "notes": "SaveSessionStateAsync and SaveSessionMetricsAsync wrap IOException in StorageException with path context. Tests: SaveSessionStateAsync_IoError_ThrowsStorageException, SaveSessionMetricsAsync_IoError_ThrowsStorageException using FailingWriteFileSystem."
  },
  {
    "id": "JOB-043",
    "requirement_module": "storage",
    "description": "Implement session retention pruning and research document storage at docs/requirements/{module}/RESEARCH-{topic}.md",
    "status": "complete",
    "priority": 2,
    "notes": "SessionManager.PruneSessionsAsync prunes oldest sessions keeping retentionCount newest by date+counter. Tests: PruneSessionsAsync_FewerThanRetention_PrunesNothing, _ExactlyRetention_PrunesNothing, _MoreThanRetention_PrunesOldest, _InvalidRetention_Throws."
  },
  {
    "id": "JOB-044",
    "requirement_module": "storage",
    "description": "Implement compact JSON storage format with on-demand prettification via lopen session show --format",
    "status": "complete",
    "priority": 2,
    "notes": "CompactJsonOptions uses WriteIndented=false and SnakeCaseLower naming. Already verified by round-trip tests in SessionManager."
  },
  {
    "id": "JOB-045",
    "requirement_module": "storage",
    "description": "Write unit tests for all storage acceptance criteria (directory, state, metrics, sessions, cache, corruption, pruning)",
    "status": "complete",
    "priority": 2,
    "notes": "92 storage unit tests covering: SessionId (24), SessionManager (30), PhysicalFileSystem (12), StoragePaths (14), StorageInitializer (6), ServiceCollectionExtensions (3), StorageException (4), Module (1). Covers directory creation, state/metrics persistence, session ID format, latest symlink, atomic writes, quarantine, pruning, IO error handling."
  },
  {
    "id": "JOB-046",
    "requirement_module": "llm",
    "description": "Implement Copilot SDK authentication using credentials from the Auth module",
    "status": "done",
    "priority": 3,
    "notes": "CopilotClientProvider + CopilotLlmService + IGitHubTokenProvider. GitHub.Copilot.SDK v0.1.23 integrated. 18 new tests (6+11+1). AC verified."
  },
  {
    "id": "JOB-047",
    "requirement_module": "llm",
    "description": "Implement fresh context window per workflow phase with no conversation history carried forward",
    "status": "done",
    "priority": 3,
    "notes": "CopilotLlmService creates a fresh CopilotSession per InvokeAsync call (fresh context per phase). No conversation history stored. 2 new fresh-context tests. AC verified."
  },
  {
    "id": "JOB-048",
    "requirement_module": "llm",
    "description": "Implement system prompt assembly with role, workflow state, step instructions, context, tools, constraints",
    "status": "complete",
    "priority": 3,
    "notes": "DefaultPromptBuilder assembles 6 labeled sections: Role, Workflow State, Instructions (phase-specific), Context (from contextSections dict), Available Tools (from IToolRegistry), Constraints. Tests: 13 tests covering all sections, ordering, phase instructions, null handling."
  },
  {
    "id": "JOB-049",
    "requirement_module": "llm",
    "description": "Implement section-level document extraction for context window (not full documents)",
    "status": "complete",
    "priority": 3,
    "notes": "SectionExtractor extracts relevant sections by header match or all sections. Token estimates via 4 chars/token heuristic. Tests: 17 tests in SectionExtractorTests."
  },
  {
    "id": "JOB-050",
    "requirement_module": "llm",
    "description": "Implement Lopen-managed tools: read_spec, read_research, read_plan, update_task_status, get_current_context, log_research, report_progress",
    "status": "complete",
    "priority": 3,
    "notes": "DefaultToolRegistry pre-registers 10 Lopen-managed tools (7 orchestration + 3 verification) with descriptions and phase availability. RegisterTool adds custom tools, GetAllTools returns all, GetToolsForPhase filters by phase. Tests: 18 tests covering all tools, phase filtering, custom registration, duplicates."
  },
  {
    "id": "JOB-051",
    "requirement_module": "llm",
    "description": "Implement oracle verification tools (verify_task/component/module_completion) dispatching sub-agent with pass/fail",
    "status": "complete",
    "priority": 3,
    "notes": "OracleVerifier implements IOracleVerifier. Dispatches sub-agent via ILlmService.InvokeAsync with oracle model (default gpt-5-mini from OracleOptions). No tools registered for oracle. Parses JSON response to OracleVerdict with pass/fail+gaps. Handles LLM errors gracefully (returns fail verdict). Handles malformed responses (empty, invalid JSON, markdown fences). Registered as singleton in DI. Tests: 30 tests in OracleVerifierTests covering constructor guards, argument validation, passing/failing verdicts, all scopes, model config, no tools, error handling, JSON extraction, cancellation."
  },
  {
    "id": "JOB-052",
    "requirement_module": "llm",
    "description": "Implement update_task_status(complete) rejection unless preceded by passing verify_*_completion",
    "status": "complete",
    "priority": 3,
    "notes": "TaskStatusGate validates completion via IVerificationTracker.IsVerified(). Scope-specific rejection messages reference correct verify_*_completion tool. QualityGateGuardrail in Core enforces back-pressure. DI wired in both LLM and Core modules. 14 TaskStatusGate tests + 14 VerificationTracker tests."
  },
  {
    "id": "JOB-053",
    "requirement_module": "llm",
    "description": "Implement per-step tool registration varying by workflow step (e.g., log_research only during research)",
    "status": "complete",
    "priority": 3,
    "notes": "Phase filtering in DefaultToolRegistry: log_research only in Research+RequirementGathering, verify_* only in Building, update_task_status only in Building, read_plan only in Planning+Building, read_spec/read_research/get_current_context/report_progress in all phases. Tests verify each phase constraint."
  },
  {
    "id": "JOB-054",
    "requirement_module": "llm",
    "description": "Implement per-phase model selection and model fallback when configured model is unavailable",
    "status": "complete",
    "priority": 3,
    "notes": "DefaultModelSelector maps all 4 WorkflowPhases to configured models. Falls back to claude-sonnet-4 with WasFallback flag and warning log when model unavailable. Tests: 9 tests covering per-phase selection, custom override, fallback on empty/whitespace, invalid phase, null guards."
  },
  {
    "id": "JOB-055",
    "requirement_module": "llm",
    "description": "Implement token usage metrics from SDK response metadata, TUI surfacing, and session persistence",
    "status": "complete",
    "priority": 3,
    "notes": "InMemoryTokenTracker records per-invocation TokenUsage (input/output tokens, context window, premium flag). Thread-safe cumulative tracking. SessionTokenMetrics snapshot with per-iteration list. ResetSession support. Tests: 8 tests covering empty state, single/multi iteration, premium count, reset, null guard, snapshot isolation."
  },
  {
    "id": "JOB-056",
    "requirement_module": "llm",
    "description": "Implement context window budget enforcement with lower-priority section truncation/summarization",
    "status": "complete",
    "priority": 3,
    "notes": "ContextBudgetManager selects high-priority sections and truncates/omits lower-priority ones to fit token budget. EstimateTokens uses 4 chars/token heuristic. Truncated sections get suffix marker. Tests: 12 tests covering fit, truncation, omission, order, edge cases."
  },
  {
    "id": "JOB-057",
    "requirement_module": "llm",
    "description": "Write unit tests for all LLM acceptance criteria (auth, context, tools, oracle, model selection, metrics, budget)",
    "status": "complete",
    "priority": 3,
    "notes": "LlmAcceptanceCriteriaTests.cs: 22 tests covering all 14 ACs (AC1-AC14). Also fixed JOB-101 (IsPremiumModel bug for -mini variants). Total LLM tests: 254."
  },
  {
    "id": "JOB-058",
    "requirement_module": "core",
    "description": "Implement module scanner that identifies all module specifications in docs/requirements/",
    "status": "complete",
    "priority": 3,
    "notes": "ModuleScanner scans docs/requirements/ directories via IFileSystem. Returns ModuleInfo records with Name, SpecificationPath, HasSpecification. Registered in DI via AddLopenCore(projectRoot). Tests: 10 tests covering empty dir, with/without spec, multiple modules, constructor validation."
  },
  {
    "id": "JOB-059",
    "requirement_module": "core",
    "description": "Implement 7-step workflow engine: Draft Spec \u2192 Dependencies \u2192 Components \u2192 Select \u2192 Tasks \u2192 Iterate \u2192 Repeat",
    "status": "complete",
    "priority": 3,
    "notes": "WorkflowEngine uses Stateless state machine. Full 7-step path: DraftSpec\u2192Dependencies\u2192Components\u2192Select\u2192Tasks\u2192Iterate\u2192Repeat. Supports reentry for task iteration, loops back via Assess, marks IsComplete on ModuleComplete. Tests: 20 tests in WorkflowEngineTests."
  },
  {
    "id": "JOB-060",
    "requirement_module": "core",
    "description": "Implement re-entrant assessment determining current workflow step from actual codebase state",
    "status": "complete",
    "priority": 3,
    "notes": "CodebaseStateAssessor reads filesystem and spec checkboxes for actual codebase state. Persisted step is a hint, not ground truth. Tests: 16 tests."
  },
  {
    "id": "JOB-061",
    "requirement_module": "core",
    "description": "Implement specification drift detection when spec sections change between iterations",
    "status": "complete",
    "priority": 3,
    "notes": "DriftDetector compares current spec sections against cached hashes using IContentHasher. Returns DriftResult records for modified, new, and removed sections. Filters by file path. Tests: 12 tests covering no-drift, modified, new, removed, empty cache, different paths, constructor validation."
  },
  {
    "id": "JOB-062",
    "requirement_module": "core",
    "description": "Implement phase transitions: Req Gathering\u2192Planning requires user confirmation (human gate)",
    "status": "complete",
    "priority": 3,
    "notes": "PhaseTransitionController implements human gate via ApproveSpecification/ResetApproval. IsRequirementGatheringToPlanningApproved starts false. Tests: 12 tests."
  },
  {
    "id": "JOB-063",
    "requirement_module": "core",
    "description": "Implement automatic phase transitions: Planning\u2192Building (plan complete) and Building\u2192Complete (all ACs pass)",
    "status": "complete",
    "priority": 3,
    "notes": "PhaseTransitionController.CanAutoTransitionToBuilding/ToComplete implement auto transitions when conditions met. Tests: 12 tests (shared with JOB-062)."
  },
  {
    "id": "JOB-064",
    "requirement_module": "core",
    "description": "Implement task hierarchy (Module \u2192 Component \u2192 Task \u2192 Subtask) with state transitions (Pending \u2192 In Progress \u2192 Complete/Failed)",
    "status": "complete",
    "priority": 3,
    "notes": "Already implemented: WorkNode<TChild> composite tree (ModuleNode\u2192ComponentNode\u2192TaskNode\u2192SubtaskNode), WorkNodeState enum (Pending\u2192InProgress\u2192Complete/Failed with retry), WorkNodeExtensions (Descendants, Leaves, ComputeAggregateState). Tests: 31 tests in 5 test files."
  },
  {
    "id": "JOB-065",
    "requirement_module": "core",
    "description": "Implement task completion oracle verification requirement before accepting update_task_status(complete)",
    "status": "complete",
    "priority": 3,
    "notes": "QualityGateGuardrail implements IGuardrail, blocks task completion at boundaries unless oracle verification passes. Returns specific error requiring verify_task_completion or verify_component_completion. Order=300, ShortCircuitOnBlock=true. Uses Func delegates for decoupling from LLM module. GuardrailPipeline registered in Core DI. Tests: 9 tests in QualityGateGuardrailTests covering pass/block, boundary detection, message content, ordering, null guards."
  },
  {
    "id": "JOB-066",
    "requirement_module": "core",
    "description": "Implement back-pressure Category 1 (Resource Limits): warn at threshold, pause at confirmation threshold",
    "status": "complete",
    "priority": 3,
    "notes": "ResourceLimitGuardrail implements IGuardrail. Checks premium request count vs budget with configurable warn (default 80%) and block (default 90%) thresholds. Short-circuits on block. Order=100. Tests: 16 tests covering pass/warn/block, messages, thresholds, constructor validation."
  },
  {
    "id": "JOB-067",
    "requirement_module": "core",
    "description": "Implement back-pressure Category 2 (Progress Integrity): churn detection and false completion rejection",
    "status": "complete",
    "priority": 3,
    "notes": "ChurnDetectionGuardrail (Cat 2) detects repeated task failures. Warns at threshold-1, blocks at threshold (configurable, default 3). Uses IterationCount from GuardrailContext. Order=200, no short-circuit. Tests: 9 tests covering pass/warn/block, message content, order, threshold validation."
  },
  {
    "id": "JOB-068",
    "requirement_module": "core",
    "description": "Implement back-pressure Category 3 (Quality Gates): acceptance criteria enforced at module/component completion",
    "status": "complete",
    "priority": 3,
    "notes": "QualityGateGuardrail (Cat 3) enforces oracle verification at completion boundaries. Takes injectable predicates for isCompletionBoundary and hasPassingVerification. Blocks if at boundary without verification. Order=300, short-circuits. Tests: 10 tests."
  },
  {
    "id": "JOB-069",
    "requirement_module": "core",
    "description": "Implement back-pressure Category 4 (Tool Discipline): corrective instructions for wasteful tool patterns",
    "status": "complete",
    "priority": 3,
    "notes": "ToolDisciplineGuardrail (Cat 4) monitors tool call counts. Warns above threshold (default 50), stronger warning above 2x threshold. Uses ToolCallCount from GuardrailContext. Order=400, no short-circuit (soft limits per spec). Tests: 9 tests."
  },
  {
    "id": "JOB-070",
    "requirement_module": "core",
    "description": "Implement git auto-commit on task completion and branch-per-module (lopen/{module}) creation",
    "status": "complete",
    "priority": 3,
    "notes": "GitWorkflowService implements IGitWorkflowService. EnsureModuleBranchAsync creates lopen/{module} branches. CommitTaskCompletionAsync auto-commits with conventional format (feat(module): complete task in component). Respects GitOptions.Enabled and AutoCommit. Handles GitException gracefully. Registered as singleton in Core DI. Tests: 25 tests in GitWorkflowServiceTests covering branch creation, auto-commit, disabled states, error handling, message formatting, null guards."
  },
  {
    "id": "JOB-071",
    "requirement_module": "core",
    "description": "Implement lopen revert to roll back to last task-completion commit and update session state",
    "status": "complete",
    "priority": 3,
    "notes": "RevertService implements IRevertService. RevertToCommitAsync calls IGitService.ResetToCommitAsync (git reset --hard). RevertResult tracks success/sha/message. SessionState.LastTaskCompletionCommitSha tracks last good commit. IGitService.GetCurrentCommitShaAsync (git rev-parse HEAD) captures current SHA. Handles git disabled, reset failures, exceptions. Registered as singleton in Core DI. Tests: 11 tests in RevertServiceTests covering success, disabled, invalid sha, failure, exception, interface conformance."
  },
  {
    "id": "JOB-072",
    "requirement_module": "core",
    "description": "Implement document management (section extraction for context) and programmatic updates without LLM invocation",
    "status": "complete",
    "priority": 3,
    "notes": "Already implemented: MarkdigSpecificationParser for section extraction + XxHashContentHasher for drift detection + NEW MarkdownUpdater for programmatic checkbox toggling and status updates. Tests: 26 existing + 14 new MarkdownUpdater tests = 40 document tests total."
  },
  {
    "id": "JOB-073",
    "requirement_module": "core",
    "description": "Implement failure handling: inline single failures with self-correction, user intervention at threshold, critical errors block",
    "status": "complete",
    "priority": 3,
    "notes": "FailureHandler with configurable threshold. Single failures SelfCorrect, repeated PromptUser, critical Block, warnings SelfCorrect. ResetFailureCount on success. Tests: 19 tests."
  },
  {
    "id": "JOB-074",
    "requirement_module": "core",
    "description": "Implement module selection listing modules with current state for user choice",
    "status": "complete",
    "priority": 3,
    "notes": "ModuleLister combines ModuleScanner with checkbox counting to determine NotStarted/InProgress/Complete/Unknown status per module. Sorted alphabetically. Tests: 12 tests in ModuleListerTests."
  },
  {
    "id": "JOB-075",
    "requirement_module": "core",
    "description": "Write unit tests for all core acceptance criteria (workflow, assessment, drift, transitions, back-pressure, git, failures)",
    "status": "done",
    "priority": 3,
    "notes": "Tests for all 24 core ACs",
    "completed_date": "2026-02-16T03:45:35Z"
  },
  {
    "id": "JOB-076",
    "requirement_module": "cli",
    "description": "Implement root command (lopen) starting TUI with full workflow and session resume offer",
    "status": "complete",
    "priority": 4,
    "notes": "Root command launches ITuiApplication.RunAsync(). Headless validation, session resume, --no-resume all wired. 10 tests."
  },
  {
    "id": "JOB-077",
    "requirement_module": "cli",
    "description": "Implement --headless mode with plain text output and --quiet/-q flag disabling TUI",
    "status": "complete",
    "priority": 4,
    "notes": "IOutputRenderer abstraction with HeadlessRenderer (plain text to stdout/stderr). --headless/--quiet/-q flags implemented and recursive. HeadlessRenderer.PromptAsync returns null (non-interactive). 8 tests."
  },
  {
    "id": "JOB-078",
    "requirement_module": "cli",
    "description": "Implement lopen spec, lopen plan, lopen build subcommands with prerequisite validation",
    "status": "complete",
    "priority": 4,
    "notes": "AC: spec runs step 1; plan errors if no spec; build errors if no spec and plan. Prerequisite validation implemented and tested (9 tests). Workflow engine wiring deferred to TUI/headless jobs."
  },
  {
    "id": "JOB-079",
    "requirement_module": "cli",
    "description": "Implement lopen auth login/status/logout subcommands wired to Auth module",
    "status": "complete",
    "priority": 4,
    "notes": "Auth subcommands (login/status/logout) implemented with closure-captured IServiceProvider pattern. 8 tests covering all ACs.",
    "completed_date": "2026-02-16T04:15:00Z"
  },
  {
    "id": "JOB-080",
    "requirement_module": "cli",
    "description": "Implement lopen session list/show/resume/delete/prune subcommands wired to Storage module",
    "status": "complete",
    "priority": 4,
    "notes": "Implemented SessionCommand with list/show/resume/delete/prune subcommands. 28 tests. Added DeleteSessionAsync to ISessionManager."
  },
  {
    "id": "JOB-081",
    "requirement_module": "cli",
    "description": "Implement lopen config show and lopen revert subcommands wired to Configuration and Core modules",
    "status": "complete",
    "priority": 4,
    "notes": "Implemented ConfigCommand (show with --json) and RevertCommand. IConfigurationRoot registered in DI. Revert updates session state. 11 tests."
  },
  {
    "id": "JOB-082",
    "requirement_module": "cli",
    "description": "Implement --prompt flag (headless: inject into LLM; TUI: populate input), exit codes (0/1/2), --help/--version",
    "status": "complete",
    "priority": 4,
    "notes": "AC-19 (headless+prompt validation), AC-20 (exit codes 0/1/2), AC-21 (--help/--version) implemented and tested. AC-17 (prompt->LLM injection) and AC-18 (prompt->TUI) deferred to workflow/TUI wiring jobs."
  },
  {
    "id": "JOB-083",
    "requirement_module": "cli",
    "description": "Write integration tests for all CLI acceptance criteria (commands, flags, exit codes, DI wiring)",
    "status": "complete",
    "priority": 4,
    "notes": "12 integration tests covering AC-1/25/21/16/19/20 plus command registration. 20/25 ACs covered across CLI test suite. Remaining 5 ACs deferred: TUI (AC-1 full, AC-2 full, AC-18), CI-level (AC-22/23/24), exit code 2 runtime path."
  },
  {
    "id": "JOB-084",
    "requirement_module": "tui",
    "description": "Implement split-screen layout with activity (left) and context (right) panes, adjustable 50/50 to 80/20 ratio",
    "status": "complete",
    "priority": 4,
    "notes": "LayoutCalculator splits screen into header/activity/context/prompt regions. Activity 50-80% clamped. ScreenRect value type. 16 tests (12 layout + 4 rect)."
  },
  {
    "id": "JOB-085",
    "requirement_module": "tui",
    "description": "Implement top panel with logo, version, model, context usage, premium requests, git branch, auth status, phase, step",
    "status": "complete",
    "priority": 4,
    "notes": "TopPanelComponent renders logo, version, model, context (humanized), premium, git branch, auth, phase/step indicator. 34 tests."
  },
  {
    "id": "JOB-086",
    "requirement_module": "tui",
    "description": "Implement context panel showing current task, task tree with completion states (checkmark/arrow/circle), active resources",
    "status": "complete",
    "priority": 4,
    "notes": "ContextPanelComponent renders task tree (\u2713/\u25b6/\u25cb/\u2717), component/module hierarchy, numbered resources. 21 tests."
  },
  {
    "id": "JOB-087",
    "requirement_module": "tui",
    "description": "Implement main activity area with scrolling, progressive disclosure (expand current, collapse previous to summaries)",
    "status": "not_started",
    "priority": 4,
    "notes": "AC: Scrollable activity area; current action expanded, previous collapsed"
  },
  {
    "id": "JOB-088",
    "requirement_module": "tui",
    "description": "Implement multi-line prompt area with Alt+Enter for newlines and keyboard hints at bottom",
    "status": "not_started",
    "priority": 4,
    "notes": "AC: Multi-line prompt input with Alt+Enter; keyboard hints displayed"
  },
  {
    "id": "JOB-089",
    "requirement_module": "tui",
    "description": "Implement landing page modal with quick commands (skippable --no-welcome) and session resume modal",
    "status": "not_started",
    "priority": 4,
    "notes": "AC: Landing page on first startup; session resume modal for active sessions"
  },
  {
    "id": "JOB-090",
    "requirement_module": "tui",
    "description": "Implement tool call output expansion, inline research display, phase transition summaries, diff viewer with syntax highlighting",
    "status": "not_started",
    "priority": 4,
    "notes": "AC: Expandable tool outputs; research drill-in; phase summaries; diff viewer with line numbers"
  },
  {
    "id": "JOB-091",
    "requirement_module": "tui",
    "description": "Implement file picker with tree view, module selection modal with arrow keys, component selection UI",
    "status": "not_started",
    "priority": 4,
    "notes": "AC: File picker, module selection modal, component selection tree view"
  },
  {
    "id": "JOB-092",
    "requirement_module": "tui",
    "description": "Implement keyboard shortcuts (Tab focus, Ctrl+P pause, number keys resources) and guided conversation UI for step 1",
    "status": "not_started",
    "priority": 4,
    "notes": "AC: All keyboard shortcuts functional; guided conversation for requirement gathering"
  },
  {
    "id": "JOB-093",
    "requirement_module": "tui",
    "description": "Implement confirmation modals (Yes/No/Always/Other), expandable sections, failure/error modals with recovery options",
    "status": "not_started",
    "priority": 4,
    "notes": "AC: Confirmation modals; failure inline auto-expanded; repeated failure modal; critical error modal"
  },
  {
    "id": "JOB-094",
    "requirement_module": "tui",
    "description": "Implement spinner async feedback, real-time progress percentages, context/premium counters in top panel",
    "status": "not_started",
    "priority": 4,
    "notes": "AC: Spinner for long ops; real-time progress; context window usage; premium request counter with fire indicator"
  },
  {
    "id": "JOB-095",
    "requirement_module": "tui",
    "description": "Implement semantic color palette, Unicode/ASCII fallbacks, box-drawing borders, syntax highlighting, NO_COLOR support",
    "status": "not_started",
    "priority": 4,
    "notes": "AC: Visual design with semantic colors, Unicode fallbacks, box chars, NO_COLOR respected"
  },
  {
    "id": "JOB-096",
    "requirement_module": "tui",
    "description": "Implement slash commands (/help /spec /plan /build /session /config /revert /auth), queued messages, Ctrl+P pause",
    "status": "not_started",
    "priority": 4,
    "notes": "AC: Slash commands invoke CLI; unknown commands error; queued messages; Ctrl+P pauses"
  },
  {
    "id": "JOB-097",
    "requirement_module": "tui",
    "description": "Implement component gallery (lopen test tui) with self-registration, mock data, interactive preview, multiple visual states",
    "status": "not_started",
    "priority": 4,
    "notes": "AC: Gallery with component listing, realistic stubs, interactive preview, self-registration"
  },
  {
    "id": "JOB-098",
    "requirement_module": "tui",
    "description": "Write unit tests for all TUI acceptance criteria (layout, interactions, modals, slash commands, visual design, gallery)",
    "status": "not_started",
    "priority": 4,
    "notes": "Tests for all ~40 TUI ACs"
  },
  {
    "id": "JOB-099",
    "requirement_module": "otel",
    "description": "Implement OTEL span hierarchy (command, phase, sdk invocation, tool, oracle, task, backpressure), counters, histograms, structured logs with TraceId/SpanId",
    "status": "not_started",
    "priority": 5,
    "notes": "AC: All 7 span types with correct attributes; all counter/histogram metrics; structured logs with correlation"
  },
  {
    "id": "JOB-100",
    "requirement_module": "otel",
    "description": "Implement OTLP export, Aspire Dashboard integration, config toggles (enabled, traces, metrics, logs), env var precedence, and <5ms overhead verification with tests",
    "status": "not_started",
    "priority": 5,
    "notes": "AC: OTLP conditional export; aspire run integration; individual signal toggles; env var precedence; performance verification; tests for all 17 OTEL ACs"
  },
  {
    "id": "JOB-101",
    "requirement_module": "llm",
    "description": "Fix IsPremiumModel to exclude -mini model variants (gpt-5-mini should not be premium)",
    "status": "complete",
    "priority": 3,
    "notes": "Bug: IsPremiumModel matched gpt-5-mini as premium because it contains 'gpt-5'. Fixed by checking for '-mini' suffix first. gpt-5-mini is a standard-tier model per GitHub billing. Fixed in JOB-057 implementation."
  }
]
